<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">












  <meta name="yandex-verification" content="5c9da79dbc90da96">











<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.1.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.2">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.2" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: true,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="卫报原文/实验表明像章鱼一样吞噬皮肤神经的施万细胞能够感知疼痛 科学家们发现了一种与痛觉有关的新器官，这让人们燃起了研制新型止痛药物的希望。 研究人员称，他们已经发现，延伸到皮肤外层的痛觉神经细胞周围的特殊细胞似乎参与了痛觉的感知——这一发现表明，痛感背后有一个新的器官。 科学家们表示，这一发现为研究疼痛提供了新的视角，可能有助于解决长期以来的难题。 瑞典卡罗林斯卡学院的帕特里克·恩福斯教授是这项">
<meta name="keywords" content="Neuro">
<meta property="og:type" content="article">
<meta property="og:title" content="2019&#x2F;08&#x2F;17&#x2F;TheGuardian&#x2F;科学家发现新的痛觉器官">
<meta property="og:url" content="http://yoursite.com/2019/08/17/2019-08-17-TheGuardian-科学家发现新的痛觉器官/index.html">
<meta property="og:site_name" content="News Pipeline">
<meta property="og:description" content="卫报原文/实验表明像章鱼一样吞噬皮肤神经的施万细胞能够感知疼痛 科学家们发现了一种与痛觉有关的新器官，这让人们燃起了研制新型止痛药物的希望。 研究人员称，他们已经发现，延伸到皮肤外层的痛觉神经细胞周围的特殊细胞似乎参与了痛觉的感知——这一发现表明，痛感背后有一个新的器官。 科学家们表示，这一发现为研究疼痛提供了新的视角，可能有助于解决长期以来的难题。 瑞典卡罗林斯卡学院的帕特里克·恩福斯教授是这项">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-08-17T23:46:23.653Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="2019&#x2F;08&#x2F;17&#x2F;TheGuardian&#x2F;科学家发现新的痛觉器官">
<meta name="twitter:description" content="卫报原文/实验表明像章鱼一样吞噬皮肤神经的施万细胞能够感知疼痛 科学家们发现了一种与痛觉有关的新器官，这让人们燃起了研制新型止痛药物的希望。 研究人员称，他们已经发现，延伸到皮肤外层的痛觉神经细胞周围的特殊细胞似乎参与了痛觉的感知——这一发现表明，痛感背后有一个新的器官。 科学家们表示，这一发现为研究疼痛提供了新的视角，可能有助于解决长期以来的难题。 瑞典卡罗林斯卡学院的帕特里克·恩福斯教授是这项">



  <link rel="alternate" href="http://feed43.com/2662513461037152.xml" title="News Pipeline" type="application/atom+xml">



  
  
  <link rel="canonical" href="http://yoursite.com/2019/08/17/2019-08-17-TheGuardian-科学家发现新的痛觉器官/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>2019/08/17/TheGuardian/科学家发现新的痛觉器官 | News Pipeline</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">News Pipeline</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Global News Together</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-timeline">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Timeline</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-posts">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Posts</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Search</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/17/2019-08-17-TheGuardian-科学家发现新的痛觉器官/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nujabes">
      <meta itemprop="description" content="Translation Training of Nujabes">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="News Pipeline">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">2019/08/17/TheGuardian/科学家发现新的痛觉器官

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-08-17 18:40:00 / Modified: 18:46:23" itemprop="dateCreated datePublished" datetime="2019-08-17T18:40:00-05:00">2019-08-17</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/science/" itemprop="url" rel="index"><span itemprop="name">science</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon">
            <i class="fa fa-eye"></i>
             Views:  
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                <span title="Symbols count in article">1.2k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                <span title="Reading time">2 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><a href="https://www.theguardian.com/" target="_blank" rel="noopener">卫报</a><a href="https://www.theguardian.com/science/2019/aug/15/scientists-discover-new-pain-sensing-organ" target="_blank" rel="noopener">原文</a>/<strong>实验表明像章鱼一样吞噬皮肤神经的施万细胞能够感知疼痛</strong></p>
<p>科学家们发现了一种与痛觉有关的新器官，这让人们燃起了研制新型止痛药物的希望。</p>
<p>研究人员称，他们已经发现，延伸到皮肤外层的痛觉神经细胞周围的特殊细胞似乎参与了痛觉的感知——这一发现表明，痛感背后有一个新的器官。</p>
<p>科学家们表示，这一发现为研究疼痛提供了新的视角，可能有助于解决长期以来的难题。</p>
<p>瑞典卡罗林斯卡学院的帕特里克·恩福斯教授是这项研究的合作者之一，他在接受《卫报》采访时说:“现在我们面临的主要问题是，这些细胞是否真的是某些慢性疼痛障碍的病因。”</p>
<p>研究人员在《科学》杂志上发表文章，揭示了他们是如何检测皮肤细胞的本质的。这是一种施万细胞，它包围并吞噬神经细胞，帮助它们存活。</p>
<p>研究表明，这些施万细胞具有章鱼形状。在检查了组织后，研究小组发现，这些细胞的身体位于皮肤的外层之下，但这些细胞有很长的延伸，环绕着痛觉神经细胞的末端。痛觉神经细胞一直延伸到皮肤的外层——表皮。</p>
<p>科学家们对这一发现感到惊讶，因为长期以来人们一直认为表皮神经细胞的末梢是裸露的或未包裹的。“在疼痛领域，我们讨论的是负责痛觉的自由神经末梢。但实际上他们并不是自由的。</p>
<p>研究小组最大的发现是这些施万细胞能够感知疼痛。这项发现是利用光遗传学，研究人员对老鼠进行基因改造，使它们脚部皮肤中的施万细胞产生一种可以吸收光线的蛋白质。</p>
<p>当光线照射到细胞上时，这种蛋白质发生变化，影响细胞膜，并产生细胞电荷的转移——换句话说，细胞受到刺激。</p>
<p>当光线照射到这些细胞上时，老鼠抬起了脚。它们还表现出舔舐、抖动和保护爪子等行为，这些迹象表明，刺激这些施万细胞会引起疼痛。</p>
<p>随着光脉冲持续时间的增加，附近发出信号的神经细胞数量增加，这支持了这些施万细胞通过神经细胞向大脑发送信号的观点。</p>
<p>为了探索其他什么可能激活这些施万细胞，研究小组将小鼠的脚暴露在热、冷和针孔中，并观察它们的行为。然后，他们将这种行为与动物的反应进行了比较，当光线被用来轻微激活这些施万细胞，使它们变得更敏感，或使它们失去活性时。</p>
<p>结果表明，在所有三种刺激下，小鼠在细胞被光激活后表现出更强的疼痛反应，而在小刺的情况下，细胞被灭活后的反应更弱。这项研究尚未在人类身上得到复制。</p>
<p>这表明，特殊的施万细胞在感知疼痛方面很重要——至少对机械损伤是如此。研究人员说，由于特殊的施万细胞和它们吞噬的神经形成网状网络，他们基本上发现了一种新的痛觉器官。“这是一个双细胞受体器官:神经和施万细胞在一起，”Ernfors说。</p>
<p>伦敦国王学院(King’s College London)感官系统专家彼得•麦克诺顿(Peter McNaughton)教授表示，这项研究有趣而激进。他说:“如果随后的研究证实了这一点，这篇论文将是一个范式的转变，表明对疼痛敏感的神经细胞终端实际上并不总是由疼痛刺激直接驱动，而是可以由相关的(施万)细胞驱动。”</p>
<p>他说问题仍然存在，包括施万细胞如何向痛觉神经细胞传递信号。</p>
<!--
Scientists discover new pain-sensing organ

Octopus-like Schwann cells that engulf nerves in skin can sense pain, experiments show

A new organ involved in the sensation of pain has been discovered by scientists, raising hopes that it could lead to the development of new painkilling drugs.

Researchers say they have discovered that the special cells that surround the pain-sensing nerve cells that extend into the outer layer of skin appear to be involved in sensing pain – a discovery that points to a new organ behind the feeling of “ouch!”.

The scientists say the finding offers new insight into pain and could help answer longstanding conundrums.

“The major question for us now is whether these cells are actually the cause for certain kinds of chronic pain disorders,” Prof Patrik Ernfors, a co-author of the research from the Karolinska Institute in Sweden, told the Guardian.

Writing in the journal Science, the researchers reveal how they examined the nature of cells in the skin that, they say, have largely been overlooked. These are a type of Schwann cell, which wrap around and engulf nerve cells and help to keep them alive.

The study has revealed these Schwann cells have an octopus-like shape. After examining tissues, the team found the body of the cells sits below the outer layer of the skin, but that the cells have long extensions that wrap around the ends of pain-sensing nerve cells that extend up into the epidermis, the outer layer of the skin.

The scientists were surprised at the findings because it has long been believed that the endings of nerve cells in the epidermis were bare or unwrapped. “In the pain field, we talk about free nerve endings that are responsible for pain sensation. But actually they are not free,” Ernfors said.

The team’s biggest finding was that these Schwann cells can sense pain. The discovery was made using optogenetics, which involved the researchers genetically modifying mice so Schwann cells in the skin of their feet produced a protein that could absorb light.

When light is shone on the cells, this protein changes, affecting the membrane and producing a shift in the cells’ electrical charge – in other words, the cells are stimulated.

When light was shone on these cells, the mice lifted their feet. They also showed behaviour including licking, shaking and guarding of their paws – signs that stimulating these Schwann cells caused pain.

As the pulses of light increased in duration, the number of nearby nerve cells firing increased, supporting the idea that these Schwann cells send a signal to the brain through the nerve cells.

To explore what else might activate these Schwann cells, the team exposed the feet of the mice to heat, cold and pinpricks and looked at their behaviour. They then compared that behaviour with the animals’ responses when light was used to slightly activate these Schwann cells, making them more sensitive, or to deactivate them.

The results showed that for all three stimuli, mice showed a stronger pain response after the cells were activated by light and, in the case of pinpricks, a weaker response after the cells were deactivated. The work has yet to be replicated in humans.

This suggests the special Schwann cells are important in sensing pain – at least for mechanical harm. With the special Schwann cells and the nerves they engulf forming a mesh-like network, the researchers say they have essentially discovered a new pain-sensing organ. “It is a two-cell receptor organ: the nerve and Schwann cell together,” Ernfors said.

Prof Peter McNaughton, an expert in sensory systems from King’s College London, said the study was interesting and radical. “If borne out by subsequent studies, this paper will be a paradigm shift showing that pain-sensitive nerve cell terminals are not in fact always directly driven by a painful stimulus but instead can be driven by associated [Schwann] cells,” he said.

He said questions remained, including how the Schwann cells transmit a signal to the pain-sensitive nerve cells.
-->
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        
          
        
        <div class="post-tags">
          
            <a href="/tags/Neuro/" rel="tag"># Neuro</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/08/15/2019-08-15-Reuters-围绕大质量黑洞运行的恒星为爱因斯坦的理论提供了支持/" rel="next" title="2019/08/15/Reuters/围绕大质量黑洞运行的恒星为爱因斯坦的理论提供了支持">
                <i class="fa fa-chevron-left"></i> 2019/08/15/Reuters/围绕大质量黑洞运行的恒星为爱因斯坦的理论提供了支持
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/08/17/2019-08-17-TheGuardian-新西兰发现人类大小的企鹅化石/" rel="prev" title="2019/08/17/TheGuardian/新西兰发现人类大小的企鹅化石">
                2019/08/17/TheGuardian/新西兰发现人类大小的企鹅化石 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Nujabes</p>
              <div class="site-description motion-element" itemprop="description">Translation Training of Nujabes</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">18</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">10</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="http://feed43.com/2662513461037152.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:n.o.o.n.e@yandex.com" title="E-Mail &rarr; mailto:n.o.o.n.e@yandex.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nujabes</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="Symbols count total">23k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="Reading time total">39 mins.</span>
  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.2</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="Total Visitors">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="Total Views">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  
    
    
  
  <script color="85,85,85" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script>





  
  









  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script src="/lib/three/three.min.js"></script>

  
  <script src="/lib/three/canvas_lines.min.js"></script>


  


  <script src="/js/utils.js?v=7.1.2"></script>

  <script src="/js/motion.js?v=7.1.2"></script>



  
  


  <script src="/js/affix.js?v=7.1.2"></script>

  <script src="/js/schemes/pisces.js?v=7.1.2"></script>




  
  <script src="/js/scrollspy.js?v=7.1.2"></script>
<script src="/js/post-details.js?v=7.1.2"></script>



  


  <script src="/js/next-boot.js?v=7.1.2"></script>


  

  

  

  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  
  

  


  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
